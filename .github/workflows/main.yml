on:
  push:
    branches:
      - main
jobs:
  velocity_blueprint_commit:
    runs-on: ubuntu-latest   
    steps:
      - uses: actions/checkout@v3
      - name: install_veloctl
        run: curl -fsSL https://releases.velocity.tech/veloctl/latest.sh | sh -s
      - name: install_helm
        run: |
           curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
           chmod 700 get_helm.sh
           ./get_helm.sh
      - name: commit_blueprint
        run: helm template ./redis-gin-mongo/k8s -f /redis-gin-mongo/k8s/velocity-values.yml | /home/runner/velocity/veloctl blueprint commit -f - --source "example"
    env:
      VELOCITY_TOKEN: ${{ secrets.VELOCITY_TOKEN }}
      
      
      
